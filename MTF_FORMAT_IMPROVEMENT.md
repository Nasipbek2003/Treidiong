# MTF Format Improvement - –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞
MTF –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–ª, –Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ WAIT –±—ã–ª–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º:
- "–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ" —Ç–µ—Ä—è–ª–æ—Å—å –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ –ø—Ä–∏—á–∏–Ω
- –ù–µ –±—ã–ª–æ —è–≤–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–∏—á–∏–Ω–∞–º–∏ –∏ —Å–ª–µ–¥—É—é—â–∏–º –¥–µ–π—Å—Ç–≤–∏–µ–º

## –ü—Ä–∏–º–µ—Ä —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

```
5Ô∏è‚É£ –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:
‚Ä¢ –§–ª–µ—Ç –Ω–∞ D1 - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ç–∫–æ–π —Ç—Ä–µ–Ω–¥–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚Ä¢ –¶–µ–Ω–∞ –¥–≤–∏–∂–µ—Ç—Å—è –≤ —à–∏—Ä–æ–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –±–µ–∑ —è–≤–Ω—ã—Ö HH+HL –∏–ª–∏ LL+LH
‚Ä¢ –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç –≤—Ö–æ–¥—É
‚Ä¢ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ H1
‚Ä¢ –°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ - –æ–∂–∏–¥–∞—Ç—å –ø—Ä–æ–±–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ç–∫–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞

üü° –ò—Ç–æ–≥: WAIT
```

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç JSON –≤ API (app/api/mtf-analysis/route.ts)

**–ë—ã–ª–æ:**
```json
{
  "reasoning": [
    "–ü—Ä–∏—á–∏–Ω–∞ 1",
    "–ü—Ä–∏—á–∏–Ω–∞ 2",
    "–î–ª—è WAIT: –°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ - —á—Ç–æ –æ–∂–∏–¥–∞—Ç—å"
  ]
}
```

**–°—Ç–∞–ª–æ:**
```json
{
  "reasoning": [
    "–ü—Ä–∏—á–∏–Ω–∞ 1",
    "–ü—Ä–∏—á–∏–Ω–∞ 2",
    "–ü—Ä–∏—á–∏–Ω–∞ 3"
  ],
  "nextAction": "–î–ª—è WAIT: –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ –æ–∂–∏–¥–∞—Ç—å"
}
```

### 2. –£–ª—É—á—à–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ AIChat.tsx

–¢–µ–ø–µ—Ä—å –∫–æ–¥:
1. –†–∞–∑–¥–µ–ª—è–µ—Ç `reasoning` (–ø—Ä–∏—á–∏–Ω—ã) –∏ `nextAction` (—Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ)
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ" —Ç–æ–ª—å–∫–æ –¥–ª—è WAIT
3. –í—ã–¥–µ–ª—è–µ—Ç –µ–≥–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º —Å –∏–∫–æ–Ω–∫–æ–π ‚è≠Ô∏è

**–ö–æ–¥ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```typescript
// –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º reasoning
let reasoningText = '';
if (mtf.reasoning && Array.isArray(mtf.reasoning) && mtf.reasoning.length > 0) {
  reasoningText = `**üìã –ü—Ä–∏—á–∏–Ω—ã:**\n${mtf.reasoning.map((r: string) => `‚Ä¢ ${r}`).join('\n')}`;
}

// –î–æ–±–∞–≤–ª—è–µ–º "–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ" –¥–ª—è WAIT
let nextActionText = '';
if (mtf.recommendation === 'WAIT' && mtf.nextAction) {
  nextActionText = `\n\n**‚è≠Ô∏è –°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**\n‚Ä¢ ${mtf.nextAction}`;
}
```

## –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞

```
‚è∏ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: WAIT

1Ô∏è‚É£ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ (D1)
‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ‚ÜîÔ∏è –§–ª–µ—Ç
‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –§–ª–µ—Ç

2Ô∏è‚É£ –§–∞–∑–∞ —Ä—ã–Ω–∫–∞ (H4)
‚Ä¢ –§–∞–∑–∞: üìä –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è
‚Ä¢ –ó–æ–Ω–∞: –ó–æ–Ω–∞ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏

3Ô∏è‚É£ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä—ã–Ω–∫–∞ (H1)
‚Ä¢ –õ–æ–∫–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –ù–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚Ä¢ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ D1: ‚ùå –ù–µ—Ç

4Ô∏è‚É£ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (M15/M5)
‚Ä¢ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–±–æ—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç—Ä–µ–Ω–¥–∞

üìã –ü—Ä–∏—á–∏–Ω—ã:
‚Ä¢ –§–ª–µ—Ç –Ω–∞ D1 - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ç–∫–æ–π —Ç—Ä–µ–Ω–¥–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚Ä¢ –¶–µ–Ω–∞ –¥–≤–∏–∂–µ—Ç—Å—è –≤ —à–∏—Ä–æ–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –±–µ–∑ —è–≤–Ω—ã—Ö HH+HL –∏–ª–∏ LL+LH
‚Ä¢ –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç –≤—Ö–æ–¥—É
‚Ä¢ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ H1

‚è≠Ô∏è –°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:
‚Ä¢ –û–∂–∏–¥–∞—Ç—å –ø—Ä–æ–±–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ç–∫–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞

üü° –ò—Ç–æ–≥: WAIT
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –ø—Ä–∏—á–∏–Ω—ã –∏ –¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ** - –∏–∫–æ–Ω–∫–∏ üìã –∏ ‚è≠Ô∏è –ø–æ–º–æ–≥–∞—é—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
‚úÖ **–¢–æ–ª—å–∫–æ –¥–ª—è WAIT** - "–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —ç—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ
‚úÖ **–ß–∏—Å—Ç—ã–π JSON** - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ –Ω–µ —Å–º–µ—à–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `app/api/mtf-analysis/route.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `nextAction` –≤ JSON —Å—Ö–µ–º—É
2. `components/AIChat.tsx` - —É–ª—É—á—à–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω –∏ –¥–µ–π—Å—Ç–≤–∏–π

---
**–î–∞—Ç–∞:** 30 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–ª—É—á—à–µ–Ω–æ
