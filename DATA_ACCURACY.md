# Точность данных и различия с TradingView

## Почему свечи могут отличаться?

### 1. Разные источники данных

**Твое приложение:**
- Источник: Twelve Data API
- Агрегация: Их собственные серверы
- Задержка: 15-30 секунд (бесплатный план)

**TradingView:**
- Источник: Множество бирж и брокеров
- Агрегация: Собственная система
- Задержка: Real-time (платная подписка) или 15 минут (бесплатная)

### 2. Таймзоны

Twelve Data использует UTC по умолчанию. TradingView может использовать:
- Exchange timezone (время биржи)
- Local timezone (твое местное время)
- UTC

Это означает, что свеча "10:00" может начинаться в разное время.

### 3. Агрегация тиков

Разные платформы по-разному агрегируют тики в свечи:

```
Пример 5-минутной свечи:

Twelve Data:
10:00:00 - 10:04:59 → Свеча 1
10:05:00 - 10:09:59 → Свеча 2

TradingView (может быть):
10:00:15 - 10:05:14 → Свеча 1
10:05:15 - 10:10:14 → Свеча 2
```

### 4. Задержка обновлений

**Бесплатный план Twelve Data:**
- Задержка: 15-30 секунд
- Обновления: Каждые 30-60 секунд

**TradingView Pro:**
- Задержка: 0-5 секунд
- Обновления: Real-time

## Насколько критичны различия?

### ✅ Некритично для:
- Анализа трендов
- Определения уровней поддержки/сопротивления
- Расчета индикаторов (RSI, MACD, SMA)
- Поиска паттернов
- Долгосрочной торговли (4h, 1D)

### ⚠️ Может быть критично для:
- Скальпинга (1min, 5min)
- Точного тайминга входа/выхода
- Торговли на новостях
- Арбитража

## Как улучшить точность?

### 1. Используй более длинные таймфреймы

Чем длиннее таймфрейм, тем меньше различий:
- **1min** - максимальные различия (±5-10 пунктов)
- **5min** - средние различия (±2-5 пунктов)
- **15min** - минимальные различия (±1-2 пункта)
- **1h+** - практически идентично

### 2. Обновлено в коде

Добавлено `timezone=UTC` в запросы к API для синхронизации времени:

```typescript
const url = `https://api.twelvedata.com/time_series?symbol=${symbol}&interval=${interval}&outputsize=${outputsize}&timezone=UTC&apikey=${TWELVE_DATA_KEY}`;
```

### 3. Платный план Twelve Data

**Grow Plan ($79/мес):**
- Real-time данные
- Задержка < 1 секунда
- 800 запросов/минуту
- WebSocket поддержка

**Pro Plan ($129/мес):**
- Institutional-grade данные
- Множественные источники
- Tick-by-tick данные

## Сравнение цен

### Пример для золота (XAU/USD):

```
Время: 10:05:00

TradingView:
Open:  $5024.50
High:  $5026.80
Low:   $5023.20
Close: $5025.40

Твое приложение (Twelve Data):
Open:  $5024.45  (разница: -$0.05)
High:  $5026.75  (разница: -$0.05)
Low:   $5023.25  (разница: +$0.05)
Close: $5025.35  (разница: -$0.05)

Разница: ±$0.05-0.10 (0.001%)
```

Это **абсолютно нормально** и не влияет на качество анализа!

## Рекомендации

### Для дневной торговли (Day Trading):
- Используй 15min+ таймфреймы
- Проверяй ключевые уровни на TradingView
- Учитывай задержку 15-30 секунд

### Для свинг-трейдинга (Swing Trading):
- Используй 1h+ таймфреймы
- Различия несущественны
- Фокусируйся на структуре, а не на точных ценах

### Для скальпинга:
- Рассмотри платный план Twelve Data
- Или используй WebSocket для real-time данных
- Или торгуй напрямую через брокера

## Проверка качества данных

В консоли браузера (F12) ты увидишь логи:

```
[API] Success! Got 500 candles
[API] Price range: $5020.00 - $5030.00, Latest: $5025.40
[API] First candle: { date: "2026-01-26 08:00:00", close: 5020.50 }
[API] Last candle: { date: "2026-01-26 10:05:00", close: 5025.40 }
```

Если цены выглядят странно (например, $2000 вместо $5000), это проблема.
Если разница ±$0.05-0.50, это нормально.

## Итог

**Небольшие различия (±0.01-0.1%) между платформами - это нормально.**

Причины:
- Разные источники данных
- Разная агрегация
- Задержка обновлений
- Таймзоны

Для качественного технического анализа это не критично. Важна общая структура рынка, тренды и уровни, а не точность до цента.

Если нужна максимальная точность - используй платный план или торгуй напрямую через брокера.
